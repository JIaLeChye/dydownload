<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>抖音工具</title>

    <!-- Bootstrap CSS -->
    <link href="./bootstrap.min.css" rel="stylesheet" />
    
    <!-- Custom CSS -->
    <link href="./main.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="theme-toggle" aria-label="切换主题">
      🌙
    </button>
    
    <div class="container mt-3">
      <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
          <h1 class="mb-3 fs-1 text-center fst-italic">抖音工具</h1>
          <form id="downloadForm" class="d-flex flex-column">
            <div class="form-group mb-3">
              <textarea
                class="form-control"
                id="videoUrl"
                style="min-height: 6rem; resize: vertical;"
                placeholder="粘贴抖音分享地址（只能粘贴一条）"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
              ></textarea>
            </div>
            <button type="submit" id="submit" class="btn btn-primary btn-lg">
              <span
                id="loading"
                class="spinner-border spinner-border-sm me-2"
                hidden
                aria-hidden="true"
              ></span>
              <span id="submit-text">解析</span>
            </button>
          </form>
          
          <!-- Media Preview Section -->
          <div id="mediaPreview" class="mt-4" hidden>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="mb-0">📱 内容预览</h5>
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-sm btn-outline-primary" onclick="toggleView('list')">
                  📋 列表
                </button>
                <button type="button" class="btn btn-sm btn-outline-primary" onclick="toggleView('grid')">
                  🔲 网格
                </button>
              </div>
            </div>
            <div id="mediaContainer" class="media-container">
              <!-- 动态内容将在这里显示 -->
            </div>
          </div>
          
          <!-- Raw Links Section (Moved to bottom) -->
          <div id="rawLinks" class="mt-4" hidden>
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0 text-muted">🔗 原始链接</h6>
              <div class="d-flex gap-2">
                <button
                  onclick="copyToClipboard()"
                  id="autocopy"
                  class="btn btn-sm btn-primary"
                  data-clipboard-target="#result"
                  hidden
                >
                  📋 一键复制全部链接
                </button>
                <button class="btn btn-sm btn-outline-secondary" onclick="toggleRawLinks()">
                  <span id="rawLinksToggleText">展开</span>
                </button>
              </div>
            </div>
            <div id="rawLinksContent" class="raw-links-content" style="display: none;">
              <!-- 原有的文本框保留作为备用 -->
              <textarea
                class="form-control d-none"
                id="result"
                placeholder="解析后的下载地址"
                readonly
                style="min-height: 6rem; resize: vertical; font-family: monospace; font-size: 0.85rem;"
              ></textarea>
              
              <!-- 新的链接列表显示区域 -->
              <div id="linksList" class="links-list">
                <!-- 链接将通过JavaScript动态生成 -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Lightbox for image viewing -->
    <div id="lightbox" class="lightbox" style="display: none;">
      <span class="lightbox-close">&times;</span>
      <span class="lightbox-nav lightbox-prev">❮</span>
      <span class="lightbox-nav lightbox-next">❯</span>
      <img id="lightbox-img" src="" alt="">
    </div>
    
    <!-- JavaScript -->
    <script src="./script.js"></script>
  </body>
</html>